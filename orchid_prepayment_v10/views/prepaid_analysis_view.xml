<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Pivot view -->
    <record id="orchid_prepaid_report_pivot" model="ir.ui.view">
        <field name="name">orchid.prepaid.report.pivot</field>
        <field name="model">orchid.prepaid.report</field>
        <field name="arch" type="xml">
            <pivot string="Prepaid Analysis" disable_linking="1">
                <!-- Rows -->
                <field name="account_id" type="row"/>
                <!-- Measures (add more if you like: posted_value, unposted_value, etc.) -->
                <field name="debit" type="measure"/>
            </pivot>
        </field>
    </record>

    <!-- Search view -->
    <record id="orchid_prepaid_report_search" model="ir.ui.view">
        <field name="name">orchid.prepaid.report.search</field>
        <field name="model">orchid.prepaid.report</field>
        <field name="arch" type="xml">
            <search string="Prepaid Analysis">
                <field name="account_id"/>
                <field name="analytic_account_id"/>
                <field name="partner_id"/>
                <field name="cost_center"/>
                <field name="move_id"/>
                <field name="journal_id"/>
                <field name="date_start"/>
                <field name="date_end"/>

                <group expand="1" string="Group By">
                    <filter string="Account" name="grp_account"
                            context="{'group_by': 'account_id'}"/>
                    <filter string="Analytic Account" name="grp_analytic"
                            context="{'group_by': 'analytic_account_id'}"/>
                    <filter string="Journal" name="grp_journal"
                            context="{'group_by': 'journal_id'}"/>
                    <filter string="Journal Entry" name="grp_move"
                            context="{'group_by': 'move_id'}"/>
                    <filter string="Partner" name="grp_partner"
                            context="{'group_by': 'partner_id'}"/>
                    <filter string="State" name="grp_state"
                            context="{'group_by': 'state'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_orchid_prepaid_report" model="ir.actions.act_window">
        <field name="name">Prepaid Analysis</field>
        <field name="res_model">orchid.prepaid.report</field>
        <field name="view_mode">pivot</field>
        <field name="search_view_id" ref="orchid_prepaid_report_search"/>
        <field name="context">{}</field>
        <!-- If you want this pivot to open by default: -->
        <field name="views" eval="[(ref('orchid_prepaid_report_pivot'), 'pivot')]"/>
    </record>

    <!-- Menu (ensure parent exists in your DB) -->
    <menuitem id="menu_orchid_prepaid_report"
              name="Prepaid Analysis"
              parent="account.account_reports_management_menu"
              action="action_orchid_prepaid_report"
              sequence="3"/>

</odoo>
